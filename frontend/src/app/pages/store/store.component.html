<div class="store-header">
  <div class="container">
    <h1>Loja</h1>
    <p>{{ products.length }} produtos</p>
  </div>
</div>

<section class="store container">

  @if (loading) {
    <div class="store__loading">Carregando produtos da loja...</div>
  } @else if (error) {
    <div class="store__error">Não foi possível carregar os produtos. Tente novamente.</div>
  } @else {
    <div class="store__grid">
      @for (p of products; track p.id) {
        <div class="product-card">
          @if (getImage(p)) {
            <img class="product-card__img" [src]="getImage(p)" [alt]="p.name" />
          } @else {
            <div class="product-card__img product-card__img--placeholder"></div>
          }
          <div class="product-card__info">
            <span class="product-card__name">{{ p.name }}</span>
            <span class="product-card__price">R$ {{ p.price }}</span>
          </div>
          @if (getSizes(p).length) {
            <div class="product-card__sizes">
              @for (s of getSizes(p); track s) {
                <span>{{ s }}</span>
              }
            </div>
          }
          <a
            class="btn btn--primary product-card__btn"
            [href]="p.permalink"
            target="_blank"
            rel="noopener noreferrer"
          >
            Ver produto
          </a>
        </div>
      }
    </div>
  }

</section>
