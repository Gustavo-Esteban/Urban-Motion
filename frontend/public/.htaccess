Options -MultiViews

DirectoryIndex index.html index.php

# Impede redirect automatico de /loja para /loja/ quando existe pasta /loja/
DirectorySlash Off

RewriteEngine On

# 1. Arquivos fisicos reais e diretorios reais passam direto
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 2. Diretorios do WordPress que devem ser servidos diretamente
RewriteCond %{REQUEST_URI} ^/wp-content [NC,OR]
RewriteCond %{REQUEST_URI} ^/wp-includes [NC]
RewriteRule ^ - [L]

# 3. WordPress REST API e wp-login → index.php do WordPress
RewriteCond %{REQUEST_URI} ^/wp-json [NC,OR]
RewriteCond %{REQUEST_URI} ^/wp-login\.php [NC,OR]
RewriteCond %{REQUEST_URI} ^/wp-cron\.php [NC]
RewriteRule ^ index.php [L]

# 4. Tudo mais (incluindo rotas Angular como /loja, /sobre) → Angular SPA
RewriteRule ^ index.html [QSA,L]
